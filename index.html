<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Productivity and EOD App</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #e6effc, #d1e0f7);
            color: #003366;
        }

        header {
            background: linear-gradient(90deg, #003366, #d32f2f);
            color: white;
            padding: 1.5rem;
            text-align: center;
            font-size: 2rem;
            letter-spacing: 1.5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .container {
            margin: 2rem auto;
            max-width: 90%;
            background: rgba(255, 255, 255, 0.9);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        label {
            font-size: 1.1rem;
            font-weight: bold;
            display: block;
            margin-bottom: 0.5rem;
            color: #003366;
        }

        select, input, button, textarea {
            width: 100%;
            padding: 0.8rem;
            margin-bottom: 1rem;
            border: none;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            font-size: 1rem;
        }

        select {
            background-color: #f5faff;
            color: #003366;
        }

        input {
            background-color: #f0f5ff;
            color: #003366;
            width: 100%;
        }

        button {
            background-color: #004990;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #003366;
        }

        ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        li {
            background: #e6effc;
            margin: 0.5rem 0;
            padding: 1rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        li button {
            width: 20px;
            height: 20px;
            background-color: #cc0000;
            color: white;
            border: none;
            font-size: 0.8rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: auto;
            border-radius: 4px;
        }

        li button:hover {
            background-color: #990000;
        }

        #totalTime {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin-top: 1rem;
            color: #003366;
        }

        #totalTime.negative {
            color: #cc0000;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            display: none;
        }

        th, td {
            padding: 0.8rem;
            border: 1px solid #ddd;
        }

        th {
            background-color: #003366;
            color: white;
            text-align: left;
        }

        .visible {
            display: table; /* Make the table visible when this class is applied */
        }

        @media (max-width: 600px) {
            header {
                font-size: 1.5rem;
                padding: 1rem;
            }

            .container {
                padding: 1rem;
            }

            label {
                font-size: 1rem;
            }

            select, input, button, textarea {
                font-size: 0.9rem;
                padding: 0.6rem;
            }

            li {
                padding: 0.8rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <header>
        Productivity & EOD Tracker
    </header>

    <div class="container">
        <label for="task">Select Task:</label>
        <select id="task">
            <option value="">-- Select a Task --</option>
            <option value="Box Review Tubs|60">Box Review Tubs (60 min)</option>
            <option value="Box Review ECM|1">Box Review ECM (1 min)</option>
            <option value="Mailroom 400 Full Tray|120">Mailroom 400 Full Tray (120 min)</option>
            <option value="Mailroom 400 .75 Tray|90">Mailroom 400 .75 Tray (90 min)</option>
            <option value="Mailroom 400 .50 Tray|60">Mailroom 400 .50 Tray (60 min)</option>
            <option value="Mailroom 400 .25 Tray|30">Mailroom 400 .25 Tray (30 min)</option>
            <option value="Mailroom 400 Full Tub|90">Mailroom 400 Full Tub (90 min)</option>
            <option value="Mailroom 400 .75 Tub|68">Mailroom 400 .75 Tub (68 min)</option>
            <option value="Mailroom 400 .50 Tub|45">Mailroom 400 .50 Tub (45 min)</option>
            <option value="Mailroom 400 .25 Tub|23">Mailroom 400 .25 Tub (23 min)</option>
            <option value="Mailroom 500 Full Tray|105">Mailroom 500 Full Tray (105 min)</option>
            <option value="Mailroom 500 .75 Tray|79">Mailroom 500 .75 Tray (79 min)</option>
            <option value="Mailroom 500 .50 Tray|53">Mailroom 500 .50 Tray (53 min)</option>
            <option value="Mailroom 500 .25 Tray|26">Mailroom 500 .25 Tray (26 min)</option>
            <option value="Mailroom 500 Full Tub|120">Mailroom 500 Full Tub (120 min)</option>
            <option value="Mailroom 500 .75 Tub|90">Mailroom 500 .75 Tub (90 min)</option>
            <option value="Mailroom 500 .50 Tub|60">Mailroom 500 .50 Tub (60 min)</option>
            <option value="Mailroom 500 .25 Tub|30">Mailroom 500 .25 Tub (30 min)</option>
            <option value="Agencies|1">Agencies (1 min)</option>
            <option value="Blue Books|4">Blue Books (4 min)</option>
            <option value="Tracking|1">Tracking (1 min)</option>
            <option value="eOPF ***Minutes Spent|1">eOPF ***Minutes Spent (1 min)</option>
            <option value="**MONDAY ONLY TRACKING|150">**MONDAY ONLY TRACKING (150 min)</option>
            <option value="FMLA ***Minutes Spent|1">FMLA ***Minutes Spent (1 min)</option>
            <option value="Morning Mail Sort|1">Morning Mail Sort (1 min)</option>
            <option value="Afternoon Mail Sort|1">Afternoon Mail Sort (1 min)</option>
            <option value="Afternoon Mail|1">Afternoon Mail (1 min)</option>
            <option value="Mailroom Meeting|1">Mailroom Meeting (1 min)</option>
            <option value="Faxes|60">Faxes (60 min)</option>
            <option value="Sweeps|30">Sweeps (30 min)</option>
            <!-- Other options omitted for brevity -->
        </select>

        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" placeholder="Enter quantity" min="1">

        <h3>Add New Task</h3>
        <input type="text" id="newTaskName" placeholder="Task Name">
        <input type="number" id="newTaskTime" placeholder="Time (min)" min="1">
        <button id="addNewTask">Add Task to List</button>

        <button id="addTask">Add Task</button>

        <h2>Your Tasks:</h2>
        <ul id="taskList"></ul>

        <div id="totalTime">435 minutes remaining</div>

        <!-- Changed from textarea to table -->
        <label for="eodReport">EOD Report:</label>
        <table id="eodTable">
            <thead>
                <tr>
                    <th>Task</th>
                    <th>Time (min)</th>
                    <th>Quantity</th>
                </tr>
            </thead>
            <tbody id="eodTableBody"></tbody>
        </table>
        <!-- End of new table -->

        <button id="saveReport">Save and Send Report</button>
    </div>

    <script>
        const taskDropdown = document.getElementById('task');
        const quantityInput = document.getElementById('quantity');
        const addTaskButton = document.getElementById('addTask');
        const taskList = document.getElementById('taskList');
        const totalTimeDisplay = document.getElementById('totalTime');
        const eodTable = document.getElementById('eodTable'); // Reference to the table
        const eodTableBody = document.getElementById('eodTableBody');
        const saveReportButton = document.getElementById('saveReport'); // Save and Send Report button

        let totalTime = 435;
        let tasks = [];

        const addNewTaskButton = document.getElementById('addNewTask');
        const newTaskNameInput = document.getElementById('newTaskName');
        const newTaskTimeInput = document.getElementById('newTaskTime');

        addNewTaskButton.addEventListener('click', () => {
            const taskName = newTaskNameInput.value.trim();
            const taskTime = parseInt(newTaskTimeInput.value);

            if (!taskName || isNaN(taskTime) || taskTime < 1) {
                alert('Please provide a valid task name and time.');
                return;
            }

            const newOption = document.createElement('option');
            newOption.value = `${taskName}|${taskTime}`;
            newOption.textContent = `${taskName} (${taskTime} min)`;
            taskDropdown.appendChild(newOption);

            newTaskNameInput.value = '';
            newTaskTimeInput.value = '';
            alert('Task added to the dropdown menu.');
        });

        addTaskButton.addEventListener('click', () => {
            const selectedTask = taskDropdown.value;
            const quantity = parseInt(quantityInput.value);

            if (!selectedTask) {
                alert('Please select a task!');
                return;
            }

            if (quantity < 1 || isNaN(quantity)) {
                alert('Please enter a valid quantity!');
                return;
            }

            const [taskName, taskTime] = selectedTask.split('|');
            const totalTaskTime = parseInt(taskTime) * quantity;
            tasks.push({ name: taskName, quantity, time: totalTaskTime });
            totalTime -= totalTaskTime;

            updateTotalTimeDisplay();
            updateTaskList();
            updateEodReport();
        });

        const updateTotalTimeDisplay = () => {
            if (totalTime < 0) {
                totalTimeDisplay.classList.add('negative');
                const percentageOver = (Math.abs(totalTime) / 435) * 100; // Calculate percentage
                totalTimeDisplay.textContent = `${totalTime} minutes remaining (-${percentageOver.toFixed(2)}% over)`;
            } else {
                totalTimeDisplay.classList.remove('negative');
                totalTimeDisplay.textContent = `${totalTime} minutes remaining`;
            }
        };

        const updateTaskList = () => {
            taskList.innerHTML = '';
            tasks.forEach((task, index) => {
                const taskItem = document.createElement('li');
                taskItem.textContent = `${task.name} (x${task.quantity}, ${task.time} min)`;

                const deleteButton = document.createElement('button');
                deleteButton.textContent = '✖';
                deleteButton.addEventListener('click', () => {
                    totalTime += task.time;
                    tasks.splice(index, 1);
                    updateTotalTimeDisplay();
                    updateTaskList();
                    updateEodReport();
                });

                taskItem.appendChild(deleteButton);
                taskList.appendChild(taskItem);
            });
        };

        const updateEodReport = () => {
            eodTableBody.innerHTML = ''; // Clear current table content
            tasks.forEach(task => {
                const row = document.createElement('tr');

                const taskNameCell = document.createElement('td');
                taskNameCell.textContent = task.name;

                const taskTimeCell = document.createElement('td');
                taskTimeCell.textContent = task.time;

                const taskQuantityCell = document.createElement('td'); // New column for quantity
                taskQuantityCell.textContent = task.quantity;

                row.appendChild(taskNameCell);
                row.appendChild(taskTimeCell);
                row.appendChild(taskQuantityCell);
                eodTableBody.appendChild(row);
            });

            // Add event listener to "Save and Send Report" button
        saveReportButton.addEventListener('click', () => {
            if (tasks.length === 0) {
                alert('No tasks to save.');
                return;
            }

            // Make the EOD Report table visible
            eodTable.classList.add('visible');
        });
        };
    </script>
</body>
</html>
